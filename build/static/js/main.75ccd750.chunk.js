(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),l=a.n(c),u=a(10),s=a(1),o=a.n(s),i=a(5),m=a(14),p=a.n(m),f={login:function(){var e=Object(i.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},d=a(7),b=null,E=function(e){b="bearer ".concat(e)},h=function(e){var t=function(){var t=Object(i.a)(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get(e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(i.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("".concat(e,"/").concat(a));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return{create:function(){var t=Object(i.a)(o.a.mark(function t(a){var n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:b}},t.next=3,p.a.post(e,a,n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),createImage:function(){var t=Object(i.a)(o.a.mark(function t(a){var n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:b,"content-type":"multipart/form-data"}},t.next=3,p.a.post(e,a,n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),getAll:t,getOne:a,update:function(){var t=Object(i.a)(o.a.mark(function t(a,n){var r,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{Authorization:b}},t.next=3,p.a.put("".concat(e,"/").concat(a),n,r);case 3:return c=t.sent,t.abrupt("return",c.data);case 5:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),remove:function(){var t=Object(i.a)(o.a.mark(function t(a){var n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:b}},t.next=3,p.a.delete("".concat(e,"/").concat(a),n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},v=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object(n.useState)(""),l=Object(d.a)(c,2),u=l[0],s=l[1],o=Object(n.useState)(""),i=Object(d.a)(o,2),m=i[0],p=i[1];return[{type:e,minLength:t,maxLength:a,required:r,value:u,onChange:function(e){s(e.target.value)},onInvalid:function(e){p(e.target.validationMessage)}},m,function(e){s(e)}]},g=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=Object(n.useState)(""),u=Object(d.a)(l,2),s=u[0],o=u[1],i=Object(n.useState)(""),m=Object(d.a)(i,2),p=m[0],f=m[1];return[{type:e,min:t,max:a,step:r,required:c,value:s,onChange:function(e){o(e.target.value)},onInvalid:function(e){f(e.target.validationMessage)}},p,function(e){o(e)}]},y=function(){return function(){var e=Object(i.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedBottlestashUser"),E(null),t({type:"LOGOUT"});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.user;case"LOGOUT":return null;default:return e}},O=a(18),x=h("/api/users"),j=function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getOne(e);case 2:return n=t.sent,a({type:"UPDATE_USER_TO_STATE",user:n}),t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return t.users;case"UPDATE_USER_TO_STATE":return e.map(function(e){return e.id!==t.user.id?e:t.user});case"REMOVE_USER":return e.filter(function(e){return e.id!==t.id});case"UPDATE_USER":return e.map(function(e){return e.id===t.updatedUser.id?t.updatedUser:e});case"REGISTER_USER":return[].concat(Object(O.a)(e),[t.newUser]);default:return e}},N=h("/api/breweries"),T=function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.create(e);case 2:return n=t.sent,a({type:"ADD_BREWERY",brewery:n}),t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BREWERIES":return t.breweries;case"ADD_BREWERY":return[].concat(Object(O.a)(e),[t.brewery]);default:return e}},S=h("/api/ratings"),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RATINGS":return t.ratings;case"ADD_RATING":return[].concat(Object(O.a)(e),[t.rating]);default:return e}},B=h("/api/bottles"),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BOTTLES":return t.bottles;case"ADD_BOTTLE":return[].concat(Object(O.a)(e),[t.newBottle]);case"REMOVE_BOTTLE":return e.filter(function(e){return e.id!==t.id});case"UPDATE_BOTTLE":return e.map(function(e){return e.id===t.updatedBottle.id?t.updatedBottle:e});default:return e}},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";return function(){var a=Object(i.a)(o.a.mark(function a(n){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n({type:"SET_NOTIFICATION",notification:{message:e,type:t}}),setTimeout(function(){n({type:"CLEAR_NOTIFICATION"})},4e3);case 2:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.notification;case"CLEAR_NOTIFICATION":return null;default:return e}},R=a(8),U=a(29),I=a(136),_=a(131),D=a(132),V=a(75),W=a(137),P=a(133),Y={loginUser:function(e,t){return function(){var a=Object(i.a)(o.a.mark(function a(n){var r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.login({username:e,password:t});case 2:r=a.sent,window.localStorage.setItem("loggedBottlestashUser",JSON.stringify(r)),E(r.token),n({type:"LOGIN",user:r});case 6:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}},M=Object(u.b)(null,Y)(Object(U.e)(function(e){var t=v("text",5,20,!0),a=Object(d.a)(t,1)[0],n=v("password",5,20,!0),c=Object(d.a)(n,1)[0],l=function(){var t=Object(i.a)(o.a.mark(function t(n){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,e.loginUser(a.value,c.value);case 4:e.history.push("/"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.setNotification("Login failed","error");case 10:case"end":return t.stop()}},t,null,[[1,7]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(D.a,{as:V.a,className:"text-center"},r.a.createElement("h2",null,"Login to Bottlestash"))),r.a.createElement(_.a,{id:"loginForm"},r.a.createElement(V.a,{style:{maxWidth:"25rem",margin:"auto"}},r.a.createElement(W.a,{onSubmit:l},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Username"),r.a.createElement(W.a.Control,Object.assign({},a,{placeholder:"username"}))),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Password"),r.a.createElement(W.a.Control,Object.assign({},c,{placeholder:"password"}))),r.a.createElement(P.a,{id:"login",variant:"success",type:"submit",block:!0},"Login")))),r.a.createElement(_.a,{className:"m-2 p-2"},r.a.createElement(V.a,{style:{maxWidth:"20rem",margin:"auto"}},r.a.createElement("small",null,"Not yet a member?",r.a.createElement(R.b,{to:"/register"}," Register here")))))})),H=a(141),z=a(40),J=a.n(z),q=function(e){var t=e.rating;return r.a.createElement(H.a,{className:"text-center p-2 m-2"},r.a.createElement(H.a.Header,{style:{backgroundColor:"rgb(52, 58, 64)",color:"rgb(255, 172, 65)"}},r.a.createElement(H.a.Title,null,t.beer.brewery.name),r.a.createElement(H.a.Subtitle,null,t.beer.name,", ",t.beer.abv," %")),r.a.createElement(H.a.Body,null,r.a.createElement("blockquote",null,t.description)),r.a.createElement(H.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"by ",r.a.createElement(R.c,{to:"/users/".concat(t.user.id,"/stash")},t.user.name),", ",J()(t.added).fromNow())))},K=function(e){var t=e.bottle;return t?r.a.createElement(H.a,{className:"p-2 m-2 text-center"},r.a.createElement(H.a.Header,{style:{backgroundColor:"rgb(52, 58, 64)",color:"rgb(255, 172, 65)"}},r.a.createElement(H.a.Title,null,t.beer.brewery.name," "),r.a.createElement(H.a.Subtitle,null,t.beer.name,", ",t.beer.abv," %")),r.a.createElement(H.a.Body,null,t.picture&&r.a.createElement(H.a.Img,{src:"/api/pictures/".concat(t.picture),className:"img-thumbnail",alt:""})),r.a.createElement(H.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"by ",r.a.createElement(R.c,{to:"/users/".concat(t.user.id,"/stash")},t.user.name),", ",J()(t.added).fromNow()))):null},Q=function(e){var t=Object(n.useState)(6),a=Object(d.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(6),s=Object(d.a)(u,2),o=s[0],i=s[1],m=function(e,t){return t.added>e.added?1:-1},p=e.bottles.filter(function(e){return!e.user.hidden}).sort(m).slice(0,o),f=e.ratings.sort(m).slice(0,c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(D.a,{as:V.a,className:"text-center"},r.a.createElement("h1",null,"Bottlestash"),r.a.createElement("h5",null,"Cooler than wine cellar - wetter than Finnish summer"))),!e.user&&r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(V.a,{className:"maindiv"},r.a.createElement("h2",{className:"mb-5"},"Bottlestash, you say?"),r.a.createElement("h4",null,"That's right!"),r.a.createElement("p",null,"With Bottlestash you can keep track of your beer cellar - what beer do you have, how many and when to drink them!"))),r.a.createElement(_.a,null,r.a.createElement(V.a,{className:"maindiv"},r.a.createElement("h3",{className:"mb-2"},"Main features:"),r.a.createElement("p",null,"Save bottles to your stash"),r.a.createElement("p",null,"Keep track of your beers expiration"),r.a.createElement("p",null,"Rate beers you drink"),r.a.createElement("p",null,"Peek other user's cellars")))),e.user&&r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(V.a,{className:"text-center"},r.a.createElement("h5",null,"Recently added bottles:"))),r.a.createElement(_.a,null,r.a.createElement(V.a,{style:{maxWidth:"35rem",margin:"auto"}},p.map(function(e){return r.a.createElement(K,{key:e.id,bottle:e})}))),r.a.createElement(_.a,null,r.a.createElement(V.a,{className:"d-flex justify-content-center mb-5"},e.bottles.length>o&&r.a.createElement(P.a,{onClick:function(){i(o+6)}},"Load more ..."))),r.a.createElement(_.a,null,r.a.createElement(V.a,{className:"text-center"},r.a.createElement("h4",null,"Recently added ratings:"))),r.a.createElement(_.a,null,r.a.createElement(V.a,{style:{maxWidth:"35rem",margin:"auto"}},f.map(function(e){return r.a.createElement(q,{key:e.id,rating:e})}))),r.a.createElement(_.a,null,r.a.createElement(V.a,{className:"d-flex justify-content-center mb-5"},e.ratings.length>c&&r.a.createElement(P.a,{onClick:function(){l(c+6)}},"Load more ...")))))},X=a(140),Z=a(139),$=function(e){return{type:"SET_FILTER",filter:e}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return t.filter;default:return e}},te=function(e){return r.a.createElement("datalist",{id:e.id},e.suggestions.map(function(e){return r.a.createElement("option",{key:e,value:e})}))},ae=function(e){return r.a.createElement(W.a,{onSubmit:e.handleSearch,inline:!0},r.a.createElement(W.a.Control,{list:e.id,name:"filter",type:"text",className:"p-2 m-2",placeholder:"search for bottles ..."}),r.a.createElement(te,{suggestions:e.suggestions,id:e.id}),r.a.createElement(P.a,{type:"submit"},"Search"))},ne={logoutUser:y,setFilter:$},re=Object(u.b)(null,ne)(Object(U.e)(function(e){return r.a.createElement(X.a,{as:_.a,collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(X.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(X.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(Z.a,{className:"mr-auto"},r.a.createElement(Z.a.Link,{href:"#",as:"span"},r.a.createElement(R.c,{to:"/"},"Home")),!e.user&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a.Link,{href:"#",as:"span"},r.a.createElement(R.c,{to:"/login"},"Login")),r.a.createElement(Z.a.Link,{href:"#",as:"span"},r.a.createElement(R.c,{to:"/register"},"Create account"))),e.user&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a.Link,{href:"#",as:"span"},r.a.createElement(R.c,{to:"/users/".concat(e.user.id,"/stash")},"Manage stash")),r.a.createElement(Z.a.Link,{href:"#",as:"span"},r.a.createElement(R.c,{to:"/rate"},"Rate beer")),r.a.createElement(Z.a.Link,{href:"#",as:"span"},r.a.createElement(R.c,{to:"/profile"},"Profile")),r.a.createElement(Z.a.Link,{href:"#",as:"span"},r.a.createElement(Z.a.Item,{onClick:function(){e.logoutUser(),e.setNotification("Logout was successfull"),e.history.push("/")}},"Logout")))),e.user&&r.a.createElement(ae,{handleSearch:function(t){t.preventDefault(),e.setFilter(t.target.filter.value),t.target.filter.value="",e.history.push("/search")},suggestions:e.suggestions,id:"search"})))})),ce={registerUser:function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.create(e);case 2:n=t.sent,a({type:"REGISTER_USER",newUser:n});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},le=Object(u.b)(null,ce)(Object(U.e)(function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1],u=v("text",5,20,!0),s=Object(d.a)(u,2),m=s[0],p=s[1],f=v("password",5,20,!0),b=Object(d.a)(f,2),E=b[0],h=b[1],g=v("text",1,20,!0),y=Object(d.a)(g,2),w=y[0],O=y[1],x=v("text",1,50,!0),j=Object(d.a)(x,2),k=j[0],N=j[1],T=v("text",1,50,!1),C=Object(d.a)(T,2),S=C[0],L=C[1],B=v("text",1,20,!1),A=Object(d.a)(B,2),F=A[0],G=A[1],R=Object(n.useState)(!1),U=Object(d.a)(R,2),I=U[0],Y=U[1],M=function(){var t=Object(i.a)(o.a.mark(function t(a){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),l(!0),a.target.checkValidity()){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,e.registerUser({username:m.value,password:E.value,name:w.value,email:k.value,city:S.value,country:F.value,hidden:I});case 7:e.setNotification("User registration was succesfull"),e.history.push("/login"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),e.setNotification("User registration failed","error");case 14:case"end":return t.stop()}},t,null,[[4,11]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(D.a,{as:V.a,className:"text-center"},r.a.createElement("h2",null,"Register to Bottlestash"))),r.a.createElement(_.a,{className:"mb-3"},r.a.createElement(V.a,{style:{maxWidth:"25rem",margin:"auto"}},r.a.createElement(W.a,{noValidate:!0,validated:c,onSubmit:M,id:"registerForm"},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Username"),r.a.createElement(W.a.Control,Object.assign({},m,{placeholder:"username"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},p)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Password"),r.a.createElement(W.a.Control,Object.assign({},E,{placeholder:"password"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},h)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Name"),r.a.createElement(W.a.Control,Object.assign({},w,{placeholder:"name to show other users"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},O)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Email"),r.a.createElement(W.a.Control,Object.assign({},k,{placeholder:"email"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},N)),r.a.createElement(W.a.Row,null,r.a.createElement(W.a.Group,{as:V.a,className:"p-2"},r.a.createElement(W.a.Label,null,"City"),r.a.createElement(W.a.Control,Object.assign({},S,{placeholder:"what city your stash at"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},L)),r.a.createElement(W.a.Group,{as:V.a,className:"p-2"},r.a.createElement(W.a.Label,null,"Country"),r.a.createElement(W.a.Control,Object.assign({},F,{placeholder:"what country your stash at"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},G))),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Check,{type:"checkbox",onChange:function(e){var t=e.target;return Y(t.checked)},label:"I want my stash to be private"})),r.a.createElement(P.a,{variant:"success",type:"submit",block:!0},"Register")))))})),ue=a(134),se=a(80),oe=a(138),ie={removeBottle:function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.remove(e);case 2:a({type:"REMOVE_BOTTLE",id:e});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},updateBottle:function(e,t){return function(){var a=Object(i.a)(o.a.mark(function a(n){var r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B.update(e,t);case 2:r=a.sent,n({type:"UPDATE_BOTTLE",updatedBottle:r});case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},updateUserToState:j,setNotification:F},me=Object(u.b)(null,ie)(function(e){if(!e.bottle)return null;var t=e.bottle,a=function(){var a=Object(i.a)(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n=Object(se.a)({},t,{beer:t.beer.id,count:t.count-1}),!(t.count<2)){a.next=8;break}return a.next=5,e.removeBottle(t.id);case 5:e.setNotification("This was your last bottle of ".concat(t.beer.name)),a.next=11;break;case 8:return a.next=10,e.updateBottle(t.id,n);case 10:e.setNotification("You drinked one bottle of ".concat(t.beer.brewery.name," ").concat(t.beer.name));case 11:e.updateUserToState(e.user.username),e.setShow(!1),a.next=18;break;case 15:a.prev=15,a.t0=a.catch(0),e.setNotification("Bottle update failed!","error");case 18:case"end":return a.stop()}},a,null,[[0,15]])}));return function(){return a.apply(this,arguments)}}();return r.a.createElement(oe.a,{centered:!0,show:e.show,onHide:function(){return e.setShow(!1)}},r.a.createElement(oe.a.Header,{closeButton:!0},r.a.createElement(oe.a.Title,null,t.beer.brewery.name,", ",t.beer.name,", ",t.beer.abv," %")),r.a.createElement(oe.a.Body,null,r.a.createElement("p",null,"Price ",t.price," \u20ac"),r.a.createElement("p",null,"Volume ",t.volume," litres"),r.a.createElement("p",null,"Bottled ",t.bottled),r.a.createElement("p",null,"Expires ",t.expiration),r.a.createElement("p",null,"You have ",t.count," bottles left")),r.a.createElement(oe.a.Footer,null,r.a.createElement(R.c,{onClick:a,to:{pathname:"/rate",state:{bottle:t}}},"Drink and rate!"),r.a.createElement(P.a,{onClick:a,variant:"light"},"Just drink!")))}),pe=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(null),s=Object(d.a)(u,2),o=s[0],i=s[1];if(!e.stash)return null;return r.a.createElement(V.a,null,r.a.createElement(ue.a,{hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Count"),r.a.createElement("th",null,"Brewery"),r.a.createElement("th",null,"Beer"))),r.a.createElement("tbody",null,e.stash.map(function(e){return r.a.createElement("tr",{key:e.id,onClick:function(){return function(e){i(e),l(!0)}(e)}},r.a.createElement("td",null,e.count),r.a.createElement("td",null,e.beer.brewery.name),r.a.createElement("td",null,e.beer.name,", ",e.beer.abv," %"))}))),r.a.createElement(me,{show:c,setShow:l,bottle:o,user:e.user}))},fe=function(e){var t=e.stash;return r.a.createElement(V.a,null,r.a.createElement(H.a,null,r.a.createElement(H.a.Header,null,r.a.createElement(H.a.Title,null,"Click here to see details of your stash")),r.a.createElement(H.a.Body,null,r.a.createElement(H.a.Text,null,"You have ",t.length," different beers in your stash"),r.a.createElement(H.a.Text,null,"You have ",t.reduce(function(e,t){return e+t.count},0)," bottles in your stash"),r.a.createElement(H.a.Text,null,"Your stash costs ",t.reduce(function(e,t){return e+t.price},0)),r.a.createElement(H.a.Text,null,"Your stash has ",t.reduce(function(e,t){return e+t.volume},0)," beer"))))},de=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1];if(!e.userToView)return null;var u=e.userToView.stash;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(D.a,{as:V.a,className:"text-center"},r.a.createElement("h2",null,e.userToView.name," 's Stash"))),e.userToView.username===e.user.username&&e.userToView.hidden&&r.a.createElement(_.a,null,r.a.createElement(V.a,{className:"p-2 text-center"},r.a.createElement("p",null,"Your stash is hidden and won't show to other users. If you wan't to make it visible to other users, please update visibility settings in your profile"))),e.userToView.username!==e.user.username&&e.userToView.hidden&&r.a.createElement(_.a,null,"This stash is private and cannot be peeked - sorry!"),(e.userToView.username===e.user.username||!e.userToView.hidden)&&r.a.createElement(_.a,null,r.a.createElement(V.a,{md:3,style:{maxWidth:"15rem"}},r.a.createElement(Z.a,{justify:!0,className:"flex-column"},r.a.createElement(Z.a.Link,{onClick:function(){return l(!c)},as:"span",className:"p-2"},"Stash details"),r.a.createElement(Z.a.Link,{as:"span",className:"p-2"},r.a.createElement(R.c,{to:"/bottles"},"Add new bottle")))),!c&&r.a.createElement(pe,{stash:u,user:e.user}),c&&r.a.createElement(fe,{stash:u})))},be=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(D.a,{className:"text-center",as:V.a},r.a.createElement(Z.a,{className:"justify-content-center mb-5"},r.a.createElement(Z.a.Item,null,r.a.createElement(R.c,{to:"/"},"Home")),r.a.createElement(Z.a.Item,null,r.a.createElement(R.c,{to:"/"},"Home")),r.a.createElement(Z.a.Item,null,r.a.createElement(R.c,{to:"/"},"Home"))),r.a.createElement("p",null,"\xa9 Miika Somero 2019"))))},Ee=h("/api/beers"),he=function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ee.create(e);case 2:return n=t.sent,a({type:"ADD_BEER",beer:n}),t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BEERS":return t.beers;case"ADD_BEER":return[].concat(Object(O.a)(e),[t.beer]);default:return e}},ge=h("/api/pictures"),ye={addBeer:he,addBrewery:T,addBottle:function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.create(e);case 2:n=t.sent,a({type:"ADD_BOTTLE",newBottle:n});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},addPicture:function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ge.createImage(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getOneBeer:function(e,t,a){return function(){var n=Object(i.a)(o.a.mark(function n(r){var c;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ee.getOne("".concat(e,"/").concat(t,"/").concat(a));case 2:return c=n.sent,n.abrupt("return",c);case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},getOneBrewery:function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.getOne(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},updateUserToState:j},we=Object(u.b)(null,ye)(Object(U.e)(function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(!1),s=Object(d.a)(u,2),m=s[0],p=s[1],f=Object(n.useState)(null),b=Object(d.a)(f,2),E=b[0],h=b[1],y=v("text",1,50,!0),w=Object(d.a)(y,2),O=w[0],x=w[1],j=v("text",1,50,!0),k=Object(d.a)(j,2),N=k[0],T=k[1],C=g("number",0,100,.1,!0),S=Object(d.a)(C,2),L=S[0],B=S[1],A=g("number",0,1e3,.01),F=Object(d.a)(A,2),G=F[0],R=F[1],U=g("number",0,50,1,!0),I=Object(d.a)(U,2),Y=I[0],M=I[1],H=g("number",0,10,.01),z=Object(d.a)(H,2),J=z[0],q=z[1],K=g("date","1990-01-01","2050-01-01",1),Q=Object(d.a)(K,2),X=Q[0],Z=Q[1],$=g("date","1990-01-01","2050-01-01",1),ee=Object(d.a)($,2),ae=ee[0],ne=ee[1],re=function(){var t=Object(i.a)(o.a.mark(function t(a){var n,r,c,u,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),l(!0),a.target.checkValidity()){t.next=4;break}return t.abrupt("return");case 4:return p(!0),t.prev=5,t.next=8,e.getOneBrewery(O.value);case 8:if(n=t.sent){t.next=13;break}return t.next=12,e.addBrewery({name:O.value});case 12:n=t.sent;case 13:return t.next=15,e.getOneBeer(n.id,N.value,L.value);case 15:if(r=t.sent){t.next=20;break}return t.next=19,e.addBeer({breweryId:n.id,name:N.value,abv:L.value});case 19:r=t.sent;case 20:if(c=null,!E){t.next=27;break}return(u=new FormData).append("picture",E),t.next=26,e.addPicture(u);case 26:c=t.sent;case 27:return t.next=29,e.addBottle({price:G.value,count:Y.value,volume:J.value,bottled:X.value,expiration:ae.value,beerId:r.id,pictureId:c?c.id:null});case 29:return t.next=31,e.updateUserToState(e.user.username);case 31:s=t.sent,p(!1),e.setNotification("Added bottle succesfully"),e.history.push("/users/".concat(s.id,"/stash")),t.next=40;break;case 37:t.prev=37,t.t0=t.catch(5),e.setNotification("Adding bottle failed - sorry!","error");case 40:case"end":return t.stop()}},t,null,[[5,37]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(D.a,{as:V.a,className:"text-center"},r.a.createElement("h2",null,"Add new bottle to your stash"))),r.a.createElement(_.a,{className:"mb-3"},r.a.createElement(V.a,{style:{maxWidth:"25rem",margin:"auto"}},r.a.createElement(W.a,{noValidate:!0,validated:c,onSubmit:re,id:"addBottleForm"},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Brewery"),r.a.createElement(W.a.Control,Object.assign({},O,{list:"breweriesAsList",placeholder:"name of the brewery"})),r.a.createElement(te,{suggestions:e.breweries,id:"breweriesAsList"}),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},x)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Name"),r.a.createElement(W.a.Control,Object.assign({},N,{placeholder:"name of your beer"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},T)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Abv"),r.a.createElement(W.a.Control,Object.assign({},L,{placeholder:"alcohol %"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},B)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Count"),r.a.createElement(W.a.Control,Object.assign({},Y,{placeholder:"number of bottles to save"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},M)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Volume"),r.a.createElement(W.a.Control,Object.assign({},J,{placeholder:"volume of the bottle in litres"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},q)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Price"),r.a.createElement(W.a.Control,Object.assign({},G,{placeholder:"price of an one bottle"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},R)),r.a.createElement(W.a.Row,null,r.a.createElement(W.a.Group,{style:{maxWidth:"50%"},className:" p-2"},r.a.createElement(W.a.Label,null,"Bottled"),r.a.createElement(W.a.Control,Object.assign({},X,{placeholder:"day beer was bottled"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},Z)),r.a.createElement(W.a.Group,{style:{maxWidth:"50%"},className:"p-2"},r.a.createElement(W.a.Label,null,"Expiration"),r.a.createElement(W.a.Control,Object.assign({},ae,{placeholder:"expiration day of bottles"})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},ne))),r.a.createElement(W.a.Group,{className:"custom-file mb-4 p-2"},r.a.createElement(W.a.Label,{className:"custom-file-label"},"Click to add pic of your bottle"),r.a.createElement(W.a.Control,{name:"picture",className:"custom-file-input",type:"file",onChange:function(e){var t=e.target;return h(t.files[0])}}),E&&r.a.createElement(W.a.Text,{className:"text-center"},E.name)),r.a.createElement(P.a,{variant:"success",type:"submit",block:!0,disabled:m}," ",m?"Loading ...":"Add beer")))))})),Oe=a(135),xe=Object(u.b)(function(e){return{notification:e.notification}})(function(e){return e.notification?r.a.createElement(_.a,null,r.a.createElement(Oe.a,{as:V.a,className:"text-center col-12",variant:"success"===e.notification.type?"success":"danger"},e.notification.message)):null}),je=null,ke=function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/breweries");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(i.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("/api/breweries","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Te={getAll:ke,create:function(){var e=Object(i.a)(o.a.mark(function e(t){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:je}},e.next=3,p.a.post("/api/breweries",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){je="bearer ".concat(e)},getOne:Ne},Ce=null,Se=function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/beers");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(i.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("/api/beers","/").concat(t.breweryId,"/").concat(t.name,"/").concat(t.abv));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Be={getAll:Se,create:function(){var e=Object(i.a)(o.a.mark(function e(t){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ce}},e.next=3,p.a.post("/api/beers",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){Ce="bearer ".concat(e)},getOne:Le},Ae={addBeer:he,addBrewery:T,addRating:function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.create(e);case 2:n=t.sent,a({type:"ADD_RATING",rating:n});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},setNotification:F},Fe=Object(u.b)(null,Ae)(Object(U.e)(function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1],u=v("text",1,50,!0),s=Object(d.a)(u,3),m=s[0],p=s[1],f=s[2],b=v("text",1,50,!0),E=Object(d.a)(b,3),h=E[0],y=E[1],w=E[2],O=v("text",0,1e3,!1),x=Object(d.a)(O,2),j=x[0],k=x[1],N=g("number",0,100,.1,!0),T=Object(d.a)(N,3),C=T[0],S=T[1],L=T[2],B=g("number",0,360,1,!1),A=Object(d.a)(B,3),F=A[0],G=A[1],R=(A[2],g("range",0,10,1,!0)),U=Object(d.a)(R,1)[0],I=g("range",0,10,1,!0),Y=Object(d.a)(I,1)[0],M=g("range",0,5,1,!0),H=Object(d.a)(M,1)[0],z=g("range",0,5,1,!0),J=Object(d.a)(z,1)[0],q=g("range",0,20,1,!0),K=Object(d.a)(q,1)[0];Object(n.useEffect)(function(){if(e.location.state){var t=e.location.state.bottle;f(t.beer.name),w(t.beer.brewery.name),L(t.beer.abv)}},[]);var Q=function(){var t=Object(i.a)(o.a.mark(function t(a){var n,r,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),l(!0),a.target.checkValidity()){t.next=4;break}return t.abrupt("return");case 4:if(t.prev=4,n=null,e.beer){t.next=21;break}return t.next=9,Te.getOne(h.value);case 9:if(r=t.sent){t.next=14;break}return t.next=13,e.addBrewery({name:h.value});case 13:r=t.sent;case 14:return t.next=16,Be.getOne({breweryId:r.id,name:m.value,abv:C.value});case 16:if(n=t.sent){t.next=21;break}return t.next=20,e.addBeer({breweryId:r.id,name:m.value,abv:C.value});case 20:n=t.sent;case 21:c={beerId:void 0===e.beer?n.id:e.beer.id,description:j.value,ageofbeer:F.value,aroma:U.value,taste:Y.value,appearance:H.value,mouthfeel:J.value,overall:K.value},e.addRating(c),e.setNotification("New rating added!"),e.history.push("/"),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(4),e.setNotification("Adding a new rating failed!","error");case 30:case"end":return t.stop()}},t,null,[[4,27]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(D.a,{as:V.a,className:"text-center mb-2"},r.a.createElement("h2",null,"Give rating to this beer"))),r.a.createElement(_.a,{className:"mb-3"},r.a.createElement(V.a,{style:{maxWidth:"25rem",margin:"auto"}},r.a.createElement(W.a,{noValidate:!0,validated:c,onSubmit:Q,id:"rateForm"},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Brewery"),r.a.createElement(W.a.Control,h),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},y)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Beer"),r.a.createElement(W.a.Control,m),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},p)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Abv"),r.a.createElement(W.a.Control,C),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},S)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Beers age when drinked"),r.a.createElement(W.a.Control,F),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},G)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Aroma"),r.a.createElement(W.a.Text,null,U.value||0),r.a.createElement(W.a.Control,U)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Taste"),r.a.createElement(W.a.Text,null,Y.value||0),r.a.createElement(W.a.Control,Y)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Appearance"),r.a.createElement(W.a.Text,null,H.value||0),r.a.createElement(W.a.Control,H)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Mouthfeel"),r.a.createElement(W.a.Text,null,J.value||0),r.a.createElement(W.a.Control,J)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Overall"),r.a.createElement(W.a.Text,null,K.value||0),r.a.createElement(W.a.Control,K)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Description"),r.a.createElement(W.a.Control,Object.assign({as:"textarea",rows:"4"},j)),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},k)),r.a.createElement(P.a,{type:"submit",variant:"success",block:!0},"Add rating")))))})),Ge={removeUser:function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.remove(e);case 2:a({type:"REMOVE_USER",id:e});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},updateUser:function(e,t){return function(){var a=Object(i.a)(o.a.mark(function a(n){var r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.update(e,t);case 2:r=a.sent,n({type:"UPDATE_USER",updatedUser:r});case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},logoutUser:y,setNotification:F},Re=Object(u.b)(null,Ge)(Object(U.e)(function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1],u=v("text",1,20,!0),s=Object(d.a)(u,3),m=s[0],p=s[1],f=s[2],b=v("text",1,50,!0),E=Object(d.a)(b,3),h=E[0],g=E[1],y=E[2],w=v("text",1,50,!1),O=Object(d.a)(w,3),x=O[0],j=O[1],k=O[2],N=v("text",1,20,!1),T=Object(d.a)(N,3),C=T[0],S=T[1],L=T[2],B=Object(n.useState)(!1),A=Object(d.a)(B,2),F=A[0],G=A[1];if(Object(n.useEffect)(function(){f(e.user.name||""),y(e.user.email||""),k(e.user.city||""),L(e.user.country||""),G(e.user.hidden)},[]),!e.user)return null;var U=function(){var t=Object(i.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),l(!0),a.target.checkValidity()){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,n={name:m.value,email:h.value,city:x.value,country:C.value,hidden:F},t.next=8,e.updateUser(e.user.id,n);case 8:e.setNotification("Profile saved!"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),e.setNotification("Saving profile failed!","error");case 14:case"end":return t.stop()}},t,null,[[4,11]])}));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=Object(i.a)(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete your profile and all its data?")){t.next=13;break}return t.prev=1,t.next=4,e.removeUser(e.user.id);case 4:return t.next=6,e.logoutUser();case 6:e.setNotification("Your profile and data has been deleted"),e.history.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.setNotification("Removing yor profile failed!","error");case 13:case"end":return t.stop()}},t,null,[[1,10]])}));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(D.a,{as:V.a,className:"text-center mb-2"},r.a.createElement("h2",null,e.user.username," profile"))),r.a.createElement(_.a,{className:"mb-3"},r.a.createElement(V.a,{md:3,style:{maxWidth:"10rem"}},r.a.createElement(Z.a,{justify:!0,className:"flex-column"},r.a.createElement(Z.a.Link,{as:"span",className:"p-2"},r.a.createElement(R.c,{to:"/users/".concat(e.user.id,"/stash")},"Your stash")),r.a.createElement(Z.a.Link,{as:"span",className:"p-2"},r.a.createElement(R.c,{to:"/users/".concat(e.user.id,"/ratings")},"Your ratings")),r.a.createElement(Z.a.Link,{onClick:I,href:"#",as:"span",className:"p-2"},"Delete profile"))),r.a.createElement(V.a,{md:9},r.a.createElement(W.a,{noValidate:!0,validated:c,style:{maxWidth:"25rem",margin:"auto"},onSubmit:U,id:"profileUpdateForm"},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Name"),r.a.createElement(W.a.Control,m),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},p)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Email"),r.a.createElement(W.a.Control,h),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},g)),r.a.createElement(W.a.Row,null,r.a.createElement(W.a.Group,{style:{maxWidth:"50%"},className:"p-2"},r.a.createElement(W.a.Label,null,"City"),r.a.createElement(W.a.Control,x),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},j)),r.a.createElement(W.a.Group,{style:{maxWidth:"50%"},className:"p-2"},r.a.createElement(W.a.Label,null,"Country"),r.a.createElement(W.a.Control,C),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},S))),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Check,{type:"checkbox",checked:F,onChange:function(e){var t=e.target;return G(t.checked)},label:"I want my stash to be private"})),r.a.createElement(P.a,{type:"submit",variant:"success",block:!0},"Save profile")))))})),Ue={setFilter:$},Ie=Object(u.b)(function(e){return{filter:e.filter}},Ue)(function(e){var t=e.bottles.filter(function(e){return!e.user.hidden}).filter(function(t){return!!e.filter&&(t.beer.name.toLowerCase().includes(e.filter.toLowerCase())||t.beer.brewery.name.toLowerCase().includes(e.filter.toLowerCase()))});return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,r.a.createElement(D.a,{as:V.a,className:"text-center"},r.a.createElement("h2",null,"Search from Bottlestash"))),r.a.createElement(_.a,null,r.a.createElement(V.a,{className:"d-flex justify-content-center block"},r.a.createElement(ae,{handleSearch:function(t){t.preventDefault(),e.setFilter(t.target.filter.value),t.target.filter.value=""},suggestions:e.suggestions,id:"search"}))),e.filter&&r.a.createElement(_.a,null,r.a.createElement(V.a,{className:"text-center"},r.a.createElement("p",null,"We have ",t.length," results for search '",e.filter,"'"))),r.a.createElement(_.a,null,r.a.createElement(V.a,{style:{maxWidth:"35em",margin:"auto"}},t.map(function(e){return r.a.createElement(K,{key:e.id,bottle:e})}))))}),_e=(a(128),{setUserToState:function(e){return function(){var t=Object(i.a)(o.a.mark(function t(a){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:E(e.token),a({type:"LOGIN",user:e});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getAllUsers:function(){return function(){var e=Object(i.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAll();case 2:a=e.sent,t({type:"GET_USERS",users:a});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},getAllBreweries:function(){return function(){var e=Object(i.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getAll();case 2:a=e.sent,t({type:"GET_BREWERIES",breweries:a});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},getAllRatings:function(){return function(){var e=Object(i.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAll();case 2:a=e.sent,t({type:"GET_RATINGS",ratings:a});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},getAllBottles:function(){return function(){var e=Object(i.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getAll();case 2:a=e.sent,t({type:"GET_BOTTLES",bottles:a});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},setNotification:F}),De=Object(u.b)(function(e){return{user:e.user,users:e.users,breweries:e.breweries,bottles:e.bottles,ratings:e.ratings}},_e)(function(e){Object(n.useEffect)(function(){var t=window.localStorage.getItem("loggedBottlestashUser");t&&e.setUserToState(JSON.parse(t))},[]),Object(n.useEffect)(function(){e.getAllUsers()},[]),Object(n.useEffect)(function(){e.getAllBreweries()},[]),Object(n.useEffect)(function(){e.getAllRatings()},[]),Object(n.useEffect)(function(){e.getAllBottles()},[]);var t=function(){return e.user?e.users.find(function(t){return t.username===e.user.username}):null};return r.a.createElement(I.a,{fluid:!0},r.a.createElement(R.a,null,r.a.createElement(re,{user:t(),setNotification:e.setNotification,suggestions:e.bottles.map(function(e){return e.beer.name})}),r.a.createElement(xe,null),r.a.createElement(U.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Q,{user:e.user,bottles:e.bottles,ratings:e.ratings})}}),r.a.createElement(U.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(M,{setNotification:e.setNotification})}}),r.a.createElement(U.a,{exact:!0,path:"/register",render:function(){return r.a.createElement(le,{setNotification:e.setNotification})}}),r.a.createElement(U.a,{exact:!0,path:"/search",render:function(){return r.a.createElement(Ie,{user:e.user,bottles:e.bottles,suggestions:e.bottles.map(function(e){return e.beer.name})})}}),e.user&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{exact:!0,path:"/bottles",render:function(){return r.a.createElement(we,{breweries:e.breweries?e.breweries.map(function(e){return e.name}):null,user:e.user,setNotification:e.setNotification})}}),r.a.createElement(U.a,{exact:!0,path:"/rate",render:function(e){return r.a.createElement(Fe,e)}}),t()&&r.a.createElement(U.a,{exact:!0,path:"/profile",render:function(){return r.a.createElement(Re,{setNotification:e.setNotification,user:t()})}}),r.a.createElement(U.a,{exact:!0,path:"/users/:id/stash",render:function(t){var a,n=t.match;return r.a.createElement(de,{userToView:(a=n.params.id,e.users.find(function(e){return e.id===a})),user:e.user})}})),r.a.createElement(be,null)))}),Ve=a(36),We=a(79),Pe=Object(Ve.c)({user:w,users:k,beers:ve,breweries:C,notification:G,ratings:L,bottles:A,filter:ee}),Ye=Object(Ve.d)(Pe,Object(Ve.a)(We.a));l.a.render(r.a.createElement(u.a,{store:Ye},r.a.createElement(De,null)),document.getElementById("root"))},81:function(e,t,a){e.exports=a(129)}},[[81,1,2]]]);
//# sourceMappingURL=main.75ccd750.chunk.js.map